{"ast":null,"code":"import _objectSpread from\"C:/Users/Neerush Buchi/Desktop/Neerush Folder/HMS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllAppointments=()=>{const[appointments,setAppointments]=useState([]);const[loading,setLoading]=useState(false);const[filterDate,setFilterDate]=useState('');const fetchAppointments=async()=>{try{setLoading(true);const res=await api.get('/appointments');setAppointments(res.data.data.appointments);}catch(err){console.error(err);alert('Error fetching appointments');}finally{setLoading(false);}};useEffect(()=>{fetchAppointments();},[]);const handleDateChange=e=>{setFilterDate(e.target.value);};const patchStatus=async(id,status)=>{try{await api.patch(\"/appointments/\".concat(id,\"/status\"),{status});// update local state\nsetAppointments(prev=>prev.map(a=>a._id===id?_objectSpread(_objectSpread({},a),{},{status}):a));}catch(err){console.error('Error updating status',err);alert('Failed to update status');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container admin-dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Appointments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-compact\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',alignItems:'center',marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:600},children:\"Select date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filterDate,onChange:handleDateChange,className:\"form-control\",style:{maxWidth:220}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{setFilterDate('');fetchAppointments();},style:{marginLeft:'auto'},children:\"Reset\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):appointments.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No appointments available\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"manage-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Patient\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Purpose\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:appointments.filter(a=>{if(!filterDate)return true;const aptDate=new Date(a.date).toISOString().split('T')[0];return aptDate===filterDate;}).map(a=>{var _a$patient,_a$doctor;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:a.appointmentId}),/*#__PURE__*/_jsx(\"td\",{children:(_a$patient=a.patient)===null||_a$patient===void 0?void 0:_a$patient.fullName}),/*#__PURE__*/_jsx(\"td\",{children:(_a$doctor=a.doctor)===null||_a$doctor===void 0?void 0:_a$doctor.name}),/*#__PURE__*/_jsx(\"td\",{children:new Date(a.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:a.time}),/*#__PURE__*/_jsx(\"td\",{children:a.purpose}),/*#__PURE__*/_jsx(\"td\",{children:a.status}),/*#__PURE__*/_jsx(\"td\",{})]},a._id);})})]})]})]});};export default AllAppointments;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","AllAppointments","appointments","setAppointments","loading","setLoading","filterDate","setFilterDate","fetchAppointments","res","get","data","err","console","error","alert","handleDateChange","e","target","value","patchStatus","id","status","patch","concat","prev","map","a","_id","_objectSpread","className","children","style","display","gap","alignItems","marginBottom","fontWeight","type","onChange","maxWidth","onClick","marginLeft","length","filter","aptDate","Date","date","toISOString","split","_a$patient","_a$doctor","appointmentId","patient","fullName","doctor","name","toLocaleDateString","time","purpose"],"sources":["C:/Users/Neerush Buchi/Desktop/Neerush Folder/HMS/frontend/src/pages/AllAppointments.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../services/api';\r\n\r\nconst AllAppointments = () => {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [filterDate, setFilterDate] = useState('');\r\n\r\n  const fetchAppointments = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await api.get('/appointments');\r\n      setAppointments(res.data.data.appointments);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error fetching appointments');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => { fetchAppointments(); }, []);\r\n\r\n  const handleDateChange = (e) => {\r\n    setFilterDate(e.target.value);\r\n  };\r\n\r\n  const patchStatus = async (id, status) => {\r\n    try {\r\n      await api.patch(`/appointments/${id}/status`, { status });\r\n      // update local state\r\n      setAppointments(prev => prev.map(a => a._id === id ? { ...a, status } : a));\r\n    } catch (err) {\r\n      console.error('Error updating status', err);\r\n      alert('Failed to update status');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container admin-dashboard\">\r\n      <h2>All Appointments</h2>\r\n      <div className=\"card-compact\">\r\n        <div style={{ display: 'flex', gap: '1rem', alignItems: 'center', marginBottom: '1rem' }}>\r\n          <label style={{ fontWeight: 600 }}>Select date:</label>\r\n          <input type=\"date\" value={filterDate} onChange={handleDateChange} className=\"form-control\" style={{ maxWidth: 220 }} />\r\n          <button className=\"btn\" onClick={() => { setFilterDate(''); fetchAppointments(); }} style={{ marginLeft: 'auto' }}>Reset</button>\r\n        </div>\r\n\r\n        {loading ? <p>Loading...</p> : (\r\n          (appointments.length === 0) ? <p>No appointments available</p> : (\r\n            <table className=\"manage-table\">\r\n              <thead><tr><th>ID</th><th>Patient</th><th>Doctor</th><th>Date</th><th>Time</th><th>Purpose</th><th>Status</th><th>Actions</th></tr></thead>\r\n              <tbody>\r\n                {appointments\r\n                  .filter(a => {\r\n                    if (!filterDate) return true;\r\n                    const aptDate = new Date(a.date).toISOString().split('T')[0];\r\n                    return aptDate === filterDate;\r\n                  })\r\n                  .map(a => (\r\n                  <tr key={a._id}>\r\n                    <td>{a.appointmentId}</td>\r\n                    <td>{a.patient?.fullName}</td>\r\n                    <td>{a.doctor?.name}</td>\r\n                    <td>{new Date(a.date).toLocaleDateString()}</td>\r\n                    <td>{a.time}</td>\r\n                    <td>{a.purpose}</td>\r\n                    <td>{a.status}</td>\r\n                    <td />\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllAppointments;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}