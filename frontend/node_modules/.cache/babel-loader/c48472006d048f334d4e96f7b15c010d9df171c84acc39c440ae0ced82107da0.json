{"ast":null,"code":"import _objectSpread from\"c:/Users/Neerush Buchi/Desktop/Neerush Folder/HMS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManagePatients=()=>{const[patients,setPatients]=useState([]);const[loading,setLoading]=useState(false);const[form,setForm]=useState({fullName:'',age:'',gender:'Male',phone:'',email:''});const[editingId,setEditingId]=useState(null);const fetchPatients=async()=>{try{setLoading(true);const res=await api.get('/patients');setPatients(res.data.data.patients);}catch(err){console.error(err);alert('Error fetching patients');}finally{setLoading(false);}};useEffect(()=>{fetchPatients();},[]);const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();try{if(editingId){await api.patch(\"/patients/\".concat(editingId),form);setEditingId(null);}else{await api.post('/patients',form);}setForm({fullName:'',age:'',gender:'Male',phone:'',email:''});fetchPatients();}catch(err){console.error(err);alert('Error saving patient');}};const handleEdit=p=>{var _p$contact,_p$user;setEditingId(p._id);setForm({fullName:p.fullName,age:p.age,gender:p.gender,phone:((_p$contact=p.contact)===null||_p$contact===void 0?void 0:_p$contact.phone)||'',email:((_p$user=p.user)===null||_p$user===void 0?void 0:_p$user.email)||''});};const handleDelete=async id=>{if(!window.confirm('Delete this patient?'))return;try{await api.delete(\"/patients/\".concat(id));fetchPatients();}catch(err){console.error(err);alert('Error deleting patient');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container admin-dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-top\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Patients\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-main\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-compact\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Patients List\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"manage-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:patients.map(p=>{var _p$contact2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.fullName}),/*#__PURE__*/_jsx(\"td\",{children:p.age}),/*#__PURE__*/_jsx(\"td\",{children:p.gender}),/*#__PURE__*/_jsx(\"td\",{children:(_p$contact2=p.contact)===null||_p$contact2===void 0?void 0:_p$contact2.phone}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn view\",onClick:()=>handleEdit(p),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete\",onClick:()=>handleDelete(p._id),children:\"Delete\"})]})]},p._id);})})]})]})}),/*#__PURE__*/_jsxs(\"aside\",{className:\"card-compact profile-panel\",children:[/*#__PURE__*/_jsx(\"h3\",{children:editingId?'Edit Patient':'Add Patient'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"fullName\",value:form.fullName,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"number\",name:\"age\",value:form.age,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"gender\",value:form.gender,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"phone\",value:form.phone,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"email\",value:form.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",type:\"submit\",children:[editingId?'Update':'Add',\" Patient\"]})]})]})]})]});};export default ManagePatients;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","ManagePatients","patients","setPatients","loading","setLoading","form","setForm","fullName","age","gender","phone","email","editingId","setEditingId","fetchPatients","res","get","data","err","console","error","alert","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","patch","concat","post","handleEdit","p","_p$contact","_p$user","_id","contact","user","handleDelete","id","window","confirm","delete","className","children","map","_p$contact2","onClick","onSubmit","onChange","required","type"],"sources":["c:/Users/Neerush Buchi/Desktop/Neerush Folder/HMS/frontend/src/pages/ManagePatients.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../services/api';\r\n\r\nconst ManagePatients = () => {\r\n  const [patients, setPatients] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [form, setForm] = useState({ fullName: '', age: '', gender: 'Male', phone: '', email: '' });\r\n  const [editingId, setEditingId] = useState(null);\r\n\r\n  const fetchPatients = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await api.get('/patients');\r\n      setPatients(res.data.data.patients);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error fetching patients');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => { fetchPatients(); }, []);\r\n\r\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingId) {\r\n        await api.patch(`/patients/${editingId}`, form);\r\n        setEditingId(null);\r\n      } else {\r\n        await api.post('/patients', form);\r\n      }\r\n      setForm({ fullName: '', age: '', gender: 'Male', phone: '', email: '' });\r\n      fetchPatients();\r\n    } catch (err) { console.error(err); alert('Error saving patient'); }\r\n  };\r\n\r\n  const handleEdit = (p) => { setEditingId(p._id); setForm({ fullName: p.fullName, age: p.age, gender: p.gender, phone: p.contact?.phone || '', email: p.user?.email || '' }); };\r\n  const handleDelete = async (id) => { if (!window.confirm('Delete this patient?')) return; try { await api.delete(`/patients/${id}`); fetchPatients(); } catch (err) { console.error(err); alert('Error deleting patient'); } };\r\n\r\n  return (\r\n    <div className=\"container admin-dashboard\">\r\n      <div className=\"admin-top\"><h2>Manage Patients</h2></div>\r\n      <div className=\"admin-main\">\r\n        <div>\r\n          <div className=\"card-compact\">\r\n            <h3>Patients List</h3>\r\n            {loading ? <p>Loading...</p> : (\r\n              <table className=\"manage-table\">\r\n                <thead><tr><th>Name</th><th>Age</th><th>Gender</th><th>Contact</th><th>Actions</th></tr></thead>\r\n                <tbody>\r\n                  {patients.map(p => (\r\n                    <tr key={p._id}>\r\n                      <td>{p.fullName}</td>\r\n                      <td>{p.age}</td>\r\n                      <td>{p.gender}</td>\r\n                      <td>{p.contact?.phone}</td>\r\n                      <td>\r\n                        <button className=\"action-btn view\" onClick={() => handleEdit(p)}>Edit</button>\r\n                        <button className=\"action-btn delete\" onClick={() => handleDelete(p._id)}>Delete</button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <aside className=\"card-compact profile-panel\">\r\n          <h3>{editingId ? 'Edit Patient' : 'Add Patient'}</h3>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\"><label>Full Name</label><input className=\"form-control\" name=\"fullName\" value={form.fullName} onChange={handleChange} required /></div>\r\n            <div className=\"form-group\"><label>Age</label><input className=\"form-control\" type=\"number\" name=\"age\" value={form.age} onChange={handleChange} /></div>\r\n            <div className=\"form-group\"><label>Gender</label><select className=\"form-control\" name=\"gender\" value={form.gender} onChange={handleChange}><option>Male</option><option>Female</option><option>Other</option></select></div>\r\n            <div className=\"form-group\"><label>Phone</label><input className=\"form-control\" name=\"phone\" value={form.phone} onChange={handleChange} /></div>\r\n            <div className=\"form-group\"><label>Email</label><input className=\"form-control\" name=\"email\" value={form.email} onChange={handleChange} /></div>\r\n            <button className=\"btn\" type=\"submit\">{editingId ? 'Update' : 'Add'} Patient</button>\r\n          </form>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManagePatients;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}