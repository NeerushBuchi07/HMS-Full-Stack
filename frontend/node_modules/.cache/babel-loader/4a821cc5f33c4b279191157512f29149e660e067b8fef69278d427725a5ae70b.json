{"ast":null,"code":"// frontend/src/pages/Billing.js\nimport React,{useEffect,useState}from'react';import{useAuth}from'../context/AuthContext';import api from'../services/api';import BillingOverview from'./BillingOverview';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Billing=()=>{const{user}=useAuth();const[bills,setBills]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{if(!user)return;// If admin or staff, show admin billing overview\nif(user.role==='admin'||user.role==='staff')return;fetchMyBills();},[user]);const fetchMyBills=async()=>{try{setLoading(true);const res=await api.get('/billing/my-bills');setBills(res.data.data.bills||[]);}catch(err){console.error('Error fetching my bills:',err);alert('Error fetching your bills');}finally{setLoading(false);}};// Admin/staff view\nif((user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='staff'){return/*#__PURE__*/_jsx(BillingOverview,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Bills\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-compact\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):bills.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No bills found\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"manage-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Bill ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bills.map(b=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:b.billId}),/*#__PURE__*/_jsx(\"td\",{children:new Date(b.createdAt||b.date).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",Number(b.totalAmount).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:b.paymentStatus}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/billing/\".concat(b._id),target:\"_blank\",rel:\"noreferrer\",children:\"View\"})})]},b._id))})]})})]});};export default Billing;","map":{"version":3,"names":["React","useEffect","useState","useAuth","api","BillingOverview","jsx","_jsx","jsxs","_jsxs","Billing","user","bills","setBills","loading","setLoading","role","fetchMyBills","res","get","data","err","console","error","alert","className","children","length","map","b","billId","Date","createdAt","date","toLocaleDateString","Number","totalAmount","toFixed","paymentStatus","href","concat","_id","target","rel"],"sources":["C:/Users/Neerush Buchi/Desktop/Neerush Folder/HMS/frontend/src/pages/Billing.js"],"sourcesContent":["// frontend/src/pages/Billing.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../services/api';\r\nimport BillingOverview from './BillingOverview';\r\n\r\nconst Billing = () => {\r\n  const { user } = useAuth();\r\n  const [bills, setBills] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    // If admin or staff, show admin billing overview\r\n    if (user.role === 'admin' || user.role === 'staff') return;\r\n    fetchMyBills();\r\n  }, [user]);\r\n\r\n  const fetchMyBills = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await api.get('/billing/my-bills');\r\n      setBills(res.data.data.bills || []);\r\n    } catch (err) {\r\n      console.error('Error fetching my bills:', err);\r\n      alert('Error fetching your bills');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Admin/staff view\r\n  if (user?.role === 'admin' || user?.role === 'staff') {\r\n    return <BillingOverview />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>My Bills</h2>\r\n      <div className=\"card-compact\">\r\n        {loading ? (\r\n          <p>Loading...</p>\r\n        ) : bills.length === 0 ? (\r\n          <p>No bills found</p>\r\n        ) : (\r\n          <table className=\"manage-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Bill ID</th>\r\n                <th>Date</th>\r\n                <th>Total</th>\r\n                <th>Payment Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {bills.map((b) => (\r\n                <tr key={b._id}>\r\n                  <td>{b.billId}</td>\r\n                  <td>{new Date(b.createdAt || b.date).toLocaleDateString()}</td>\r\n                  <td>â‚¹{Number(b.totalAmount).toFixed(2)}</td>\r\n                  <td>{b.paymentStatus}</td>\r\n                  <td>\r\n                    <a href={`/billing/${b._id}`} target=\"_blank\" rel=\"noreferrer\">View</a>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Billing;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CACjC,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAAEC,IAAK,CAAC,CAAGR,OAAO,CAAC,CAAC,CAC1B,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAE7CD,SAAS,CAAC,IAAM,CACd,GAAI,CAACU,IAAI,CAAE,OACX;AACA,GAAIA,IAAI,CAACK,IAAI,GAAK,OAAO,EAAIL,IAAI,CAACK,IAAI,GAAK,OAAO,CAAE,OACpDC,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACN,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAM,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACFF,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAd,GAAG,CAACe,GAAG,CAAC,mBAAmB,CAAC,CAC9CN,QAAQ,CAACK,GAAG,CAACE,IAAI,CAACA,IAAI,CAACR,KAAK,EAAI,EAAE,CAAC,CACrC,CAAE,MAAOS,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAEF,GAAG,CAAC,CAC9CG,KAAK,CAAC,2BAA2B,CAAC,CACpC,CAAC,OAAS,CACRT,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,GAAI,CAAAJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,IAAI,IAAK,OAAO,EAAI,CAAAL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,IAAI,IAAK,OAAO,CAAE,CACpD,mBAAOT,IAAA,CAACF,eAAe,GAAE,CAAC,CAC5B,CAEA,mBACEI,KAAA,QAAKgB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnB,IAAA,OAAAmB,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBnB,IAAA,QAAKkB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BZ,OAAO,cACNP,IAAA,MAAAmB,QAAA,CAAG,YAAU,CAAG,CAAC,CACfd,KAAK,CAACe,MAAM,GAAK,CAAC,cACpBpB,IAAA,MAAAmB,QAAA,CAAG,gBAAc,CAAG,CAAC,cAErBjB,KAAA,UAAOgB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC7BnB,IAAA,UAAAmB,QAAA,cACEjB,KAAA,OAAAiB,QAAA,eACEnB,IAAA,OAAAmB,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBnB,IAAA,OAAAmB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbnB,IAAA,OAAAmB,QAAA,CAAI,OAAK,CAAI,CAAC,cACdnB,IAAA,OAAAmB,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBnB,IAAA,OAAAmB,QAAA,CAAI,SAAO,CAAI,CAAC,EACd,CAAC,CACA,CAAC,cACRnB,IAAA,UAAAmB,QAAA,CACGd,KAAK,CAACgB,GAAG,CAAEC,CAAC,eACXpB,KAAA,OAAAiB,QAAA,eACEnB,IAAA,OAAAmB,QAAA,CAAKG,CAAC,CAACC,MAAM,CAAK,CAAC,cACnBvB,IAAA,OAAAmB,QAAA,CAAK,GAAI,CAAAK,IAAI,CAACF,CAAC,CAACG,SAAS,EAAIH,CAAC,CAACI,IAAI,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAK,CAAC,cAC/DzB,KAAA,OAAAiB,QAAA,EAAI,QAAC,CAACS,MAAM,CAACN,CAAC,CAACO,WAAW,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,EAAK,CAAC,cAC5C9B,IAAA,OAAAmB,QAAA,CAAKG,CAAC,CAACS,aAAa,CAAK,CAAC,cAC1B/B,IAAA,OAAAmB,QAAA,cACEnB,IAAA,MAAGgC,IAAI,aAAAC,MAAA,CAAcX,CAAC,CAACY,GAAG,CAAG,CAACC,MAAM,CAAC,QAAQ,CAACC,GAAG,CAAC,YAAY,CAAAjB,QAAA,CAAC,MAAI,CAAG,CAAC,CACrE,CAAC,GAPEG,CAAC,CAACY,GAQP,CACL,CAAC,CACG,CAAC,EACH,CACR,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}